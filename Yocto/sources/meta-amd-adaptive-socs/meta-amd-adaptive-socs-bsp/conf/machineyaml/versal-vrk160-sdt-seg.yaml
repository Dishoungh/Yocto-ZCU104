args:
    - --hw-description https://edf.amd.com/sswreleases/rel-v2025.2/sdt/2025.2/2025.2_1115_1_11150857/external/versal-vrk160-sdt-seg/versal-vrk160-sdt-seg_2025.2_1115_1_11150857.tar.gz
    - --machine-name versal-vrk160-sdt-seg
    - -g full
    - --domain-file ${LAYER_PATH_xilinx-standalone-sdt}/conf/domainyaml/openamp-overlay-versal.yaml

kconfig:
    CONFIG_YOCTO_BBMC_CORTEXR5_1_BAREMETAL: y
    CONFIG_YOCTO_BBMC_LINUX_DTSI: ${LAYER_PATH_xilinx-virtualization}/recipes-bsp/device-tree/files/versal-xen.dtsi
        ${BSPLAYERDIR_amd-adaptive-socs-bsp}/recipes-bsp/device-tree/files/platform-misc.dtsi
machine:
    pre:
    post:
        include:
            comment: "Enable meta-xilinx-imgrcvry if available"
            op: 'conf/enable-xilinx-imgrcvry.conf'
        QB_MEM:
            op: '='
            val: "-m 12G"
        QEMU_HW_DTB_PS:
            op: '='
            val: "${QEMU_HW_DTB_PATH}/board-versal-ps-vrk160.dtb "
        QEMU_HW_DTB_PMC:
            op: '='
            val: "${QEMU_HW_DTB_PATH}/board-versal-pmc-virt.dtb"
        QEMU_HW_BOOT_MODE:
            op: '='
            val: "8"
        QEMU_HW_OSPI_FILE:
            op: '='
            val: "qemu-ospi-${MACHINE}.bin"
        QB_OPT_APPEND:append:
            op: ':='
            val: " -drive file=@DEPLOY_DIR_IMAGE@/${QEMU_HW_OSPI_FILE},if=mtd,format=raw,index=4"
